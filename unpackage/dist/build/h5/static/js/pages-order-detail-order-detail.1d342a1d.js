(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-order-detail-order-detail"],{"000f":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"border-bottom d-flex a-center py-2 border-light-secondary",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.open.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"rounded mx-1 flex-shrink",staticStyle:{width:"150rpx",height:"150rpx"},attrs:{src:t.item.cover,mode:"widthFix"}}),n("v-uni-view",{staticClass:"flex-1"},[n("v-uni-view",{staticClass:"d-flex a-center"},[n("v-uni-text",{staticClass:"font-md text-dark"},[t._v(t._s(t.item.title))]),n("v-uni-text",{staticClass:"font-md text-light-muted ml-auto"},[t._v("￥"+t._s(t.item.pprice))])],1),n("v-uni-view",{staticClass:"d-flex a-center"},[n("v-uni-text",{staticClass:"font text-dark"},[t._v(t._s(t.item.attrs))]),n("v-uni-text",{staticClass:"font text-light-muted ml-auto"},[t._v("x"+t._s(t.item.num))])],1)],1)],1)},r=[]},"113e":function(t,e,n){"use strict";n("99af"),n("d3b7"),n("e25e"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={getHoroscope:function(t){var e=["摩羯","水瓶","双鱼","白羊","金牛","双子","巨蟹","狮子","处女","天秤","天蝎","射手","摩羯"];t=new Date(t);var n=t.getMonth()+1,i=t.getDate(),a=n-(i-14<"865778999988".charAt(n));return e[a]+"座"},sumAge:function(t){var e=new Date(t.replace(/-/g,"/")),n=new Date,i=n.getTime()-e.getTime(),a=Math.floor(i/864e5),r=i%864e5,s=Math.floor(r/36e5),o=r%36e5,u=(Math.floor(o/6e4),o%6e4);Math.round(u/1e3);return a+"天 "+s+"小时 "},getChatTime:function(t,e){if(t=t.toString().length<13?1e3*t:t,e=e.toString().length<13?1e3*e:e,(parseInt(t)-parseInt(e))/1e3>300)return this.gettime(t)},gettime:function(t){t=t.toString().length<13?1e3*t:t;var e=(new Date).getTime(),n=(e-parseInt(t))/1e3;return n<43200?this.dateFormat(new Date(t),"{A} {t}:{ii}"):n<518400?this.dateFormat(new Date(t),"{Mon}月{DD}日 {A} {t}:{ii}"):this.dateFormat(new Date(t),"{Y}-{MM}-{DD} {A} {t}:{ii}")},parseNumber:function(t){return t<10?"0"+t:t},dateFormat:function(t,e){var n={},i=/\{([^}]+)\}/,a=["1","2","3","4","5","6","7","8","9","10","11","12"];n["Y"]=t.getFullYear(),n["M"]=t.getMonth()+1,n["MM"]=this.parseNumber(n["M"]),n["Mon"]=a[n["M"]-1],n["D"]=t.getDate(),n["DD"]=this.parseNumber(n["D"]),n["h"]=t.getHours(),n["hh"]=this.parseNumber(n["h"]),n["t"]=n["h"]>12?n["h"]-12:n["h"],n["tt"]=this.parseNumber(n["t"]),n["A"]=n["h"]>12?"下午":"上午",n["i"]=t.getMinutes(),n["ii"]=this.parseNumber(n["i"]),n["s"]=t.getSeconds(),n["ss"]=this.parseNumber(n["s"]);while(i.test(e))e=e.replace(i,n[RegExp.$1]);return e},getAgeByBirthday:function(t){var e=new Date(t.replace(/-/g,"/")),n=new Date;return n.getFullYear()-e.getFullYear()-(n.getMonth()<e.getMonth()||n.getMonth()==e.getMonth()&&n.getDate()<e.getDate()?1:0)},timeDown:function(t){var e=(new Date).getTime()/1e3,n=parseInt(t-e),i=Math.floor(n/86400),a=n%86400,r=Math.floor(a/3600);a%=3600;var s=Math.floor(a/60),o=a%60;return"".concat(i,"天 ").concat(r,"小时 ").concat(s,"分 ").concat(o,"秒")}};e.default=i},"17f0":function(t,e,n){"use strict";n.r(e);var i=n("8fe4"),a=n("2c1d");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var s,o=n("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"25f124fa",null,!1,i["a"],s);e["default"]=u.exports},"1cf2":function(t,e,n){"use strict";n.r(e);var i=n("bdd7"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"2c1d":function(t,e,n){"use strict";n.r(e);var i=n("c079"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},4490:function(t,e,n){"use strict";(function(t){var i=n("4ea4");n("99af"),n("4160"),n("a15b"),n("d81d"),n("b680"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("c0a4")),r=i(n("fff4")),s=i(n("17f0")),o=i(n("91bb")),u=i(n("113e")),c=i(n("ecab")),d=null,l={components:{orderListItem:a.default,uniListItem:r.default,price:s.default,card:o.default,commonButton:c.default},data:function(){return{id:0,no:"",address:{province:"",city:"",district:"",address:"",zip:0,name:"",phone:""},total_price:0,remark:"",paid_time:null,payment_method:"",payment_no:"",refund_status:"pending",ship_status:"",extra:null,create_time:"",update_time:"",reviewed:0,order_items:[],couponUserItem:[],end_time:0,timeDown:""}},computed:{price:function(){var t=0;return this.order_items.forEach((function(e){t+=e.pprice*e.num})),t.toFixed(2)},path:function(){var t=this.address,e=t.province,n=t.city,i=t.district,a=t.address;return"".concat(e," ").concat(n," ").concat(i," ").concat(a)},status:function(){return this.$U.formatStatus({paid_time:this.paid_time,refund_status:this.refund_status,ship_status:this.ship_status})},coupon:function(){if(Array.isArray(this.couponUserItem)&&0===this.couponUserItem.length)return"未使用";var t=this.couponUserItem.coupon,e=t.type,n=t.value;return 0===e?"-￥"+n:"打"+n+"折"},timeDownText:function(){var t="";switch(this.status){case"待支付":t="取消";break;case"待收货":t="确认";break;case"待发货":return"等待商家发货";case"退款中":return"等待商家审核";case"已签收":return"订单已签收"}return""!==t&&""!==this.timeDown?"还差 ".concat(this.timeDown," 自动").concat(t):""}},onLoad:function(t){if(!t.id)return uni.showToast({title:"订单不存在",icon:"none"}),uni.navigateBack({delta:1});this.id=t.id},onUnload:function(){d&&clearInterval(d)},onShow:function(){this.getData()},methods:{openTimeDown:function(){var t=this;"待支付"!==this.status&&"待收货"!==this.status||(d&&clearInterval(d),d=setInterval((function(){var e=(new Date).getTime()/1e3;if(e>t.end_time)return uni.switchTab({url:"../index/index"}),uni.showToast({title:"待支付"===t.status?"订单已关闭":"订单已确认",icon:"none"}),t.timeDown="",clearInterval(d);t.timeDown=u.default.timeDown(t.end_time)}),1e3))},getData:function(){var e=this;this.$H.get("/order/"+this.id,{},{token:!0}).then((function(n){t("log",n," at pages/order-detail/order-detail.vue:246"),e.end_time=n.end_time?n.end_time:0,e.no=n.no,e.address=n.address,e.total_price=n.total_price,e.remark=n.remark,e.paid_time=n.paid_time,e.payment_method=n.payment_method,e.payment_no=n.payment_no,e.refund_status=n.refund_status,e.ship_status=n.ship_status,e.extra=n.extra,e.create_time=n.create_time,e.update_time=n.update_time,e.reviewed=n.reviewed;var i=n.orderItems.map((function(t){var e=[];if(1===t.skus_type&&t.goodsSkus&&t.goodsSkus.skus){var n=t.goodsSkus.skus;for(var i in n)e.push(n[i].value)}return{id:t.goods_id,cover:t.goodsItem.cover,title:t.goodsItem.title,pprice:t.price,attrs:e.join(","),num:t.num}}));e.openTimeDown(),e.order_items=i,e.couponUserItem=n.couponUserItem}))},openPayMethods:function(){uni.navigateTo({url:"/pages/pay-methods/pay-methods?detail="+JSON.stringify({id:this.id,price:this.total_price})})},closeOrder:function(){var t=this;uni.showModal({content:"是否要取消该订单？",success:function(e){e.confirm&&(uni.showLoading({title:"取消订单中...",mask:!1}),t.$H.post("/closeorder/"+t.id,{},{token:!0}).then((function(t){uni.hideLoading(),uni.navigateBack({delta:1}),uni.showToast({title:"取消订单成功",icon:"none"})})).catch((function(t){uni.hideLoading()})))}})},applyRefund:function(){uni.navigateTo({url:"/pages/order-refund/order-refund?detail="+JSON.stringify({id:this.id})})},openLogistics:function(){uni.navigateTo({url:"/pages/logistics-detail/logistics-detail?detail="+JSON.stringify({id:this.id})})},received:function(){var t=this;uni.showModal({content:"是否要确认收货？",success:function(e){e.confirm&&(uni.showLoading({title:"确认收货中...",mask:!1}),t.$H.post("/order/"+t.id+"/received",{},{token:!0}).then((function(t){uni.hideLoading(),uni.navigateBack({delta:1}),uni.showToast({title:"确认收货成功",icon:"none"})})).catch((function(t){uni.hideLoading()})))}})}}};e.default=l}).call(this,n("0de9")["log"])},4785:function(t,e,n){"use strict";n.r(e);var i=n("7cf4"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"5b77":function(t,e,n){"use strict";n.r(e);var i=n("4490"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},"7cf4":function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{item:Object,index:Number},methods:{open:function(){uni.navigateTo({url:"/pages/detail/detail"})}}};e.default=i},"8fe4":function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"d-flex a-self-start font-md line-h",class:t.priceSize+" "+t.color},[n("v-uni-text",{staticClass:"a-self-start font-sm",class:t.unitSize},[t._v("￥")]),t._v(t._s(t.price))],1)},r=[]},"91bb":function(t,e,n){"use strict";n.r(e);var i=n("e40a"),a=n("1cf2");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var s,o=n("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"5a93fdfa",null,!1,i["a"],s);e["default"]=u.exports},"9de7":function(t,e,n){"use strict";n.r(e);var i=n("df65"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=a.a},bd63:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"main-bg-color text-white p-4 d-flex a-end j-sb",staticStyle:{height:"300rpx"}},[n("v-uni-view",{staticClass:"mb-3"},[n("v-uni-view",{staticClass:"font-lg"},[t._v(t._s(t.status))]),n("v-uni-view",{staticClass:"font"},[t._v(t._s(t.timeDownText))])],1),n("v-uni-view",{staticClass:"iconfont icon-daishouhuo line-h mb-3",staticStyle:{"font-size":"100rpx"}})],1),n("v-uni-view",{staticClass:"p-3 bg-white"},[n("v-uni-view",{staticClass:"text-light-muted font-md"},[n("v-uni-text",{staticClass:"font-lg text-dark mr-2"},[t._v(t._s(t.address.name))]),t._v(t._s(t.address.phone))],1),n("v-uni-view",{staticClass:"text-light-muted font-md"},[t._v(t._s(t.path))])],1),n("divider"),n("v-uni-view",{staticClass:"px-2"},[t._l(t.order_items,(function(t,e){return[n("order-list-item",{key:e+"_0",attrs:{item:t,index:e}})]}))],2),n("divider"),n("uni-list-item",[n("v-uni-text",{staticClass:"font-md text-light-muted"},[t._v("商品总价")]),n("v-uni-view",{staticClass:"font-md text-light-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.price))])],1),n("uni-list-item",[n("v-uni-text",{staticClass:"font-md text-light-muted"},[t._v("快递")]),n("v-uni-view",{staticClass:"font-md text-light-muted",attrs:{slot:"right"},slot:"right"},[t._v("包邮")])],1),n("uni-list-item",[n("v-uni-text",{staticClass:"font-md text-light-muted"},[t._v("优惠券")]),n("v-uni-view",{staticClass:"font-md text-light-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.coupon))])],1),n("uni-list-item",[n("v-uni-text",{staticClass:"font-md main-text-color"},[t._v("实际付款")]),n("v-uni-view",{staticClass:"font-md text-light-muted",attrs:{slot:"right"},slot:"right"},[n("price",[t._v(t._s(t.total_price))])],1)],1),n("divider"),n("card",{attrs:{headTitle:"订单信息"}},[n("uni-list-item",{attrs:{title:"订单编号"}},[n("v-uni-view",{staticClass:"font-md text-light-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.no))])],1)],1),t.extra?n("card",{attrs:{headTitle:"退款相关"}},[n("uni-list-item",{attrs:{title:"申请退款"}},[n("v-uni-view",{staticClass:"font-md text-light-muted",attrs:{slot:"right"},slot:"right"},[t._v(t._s(t.extra.refund_reason))])],1)],1):t._e(),"待支付"===t.status||"待发货"===t.status||"待收货"===t.status?n("v-uni-view",{staticStyle:{height:"100rpx"}}):t._e(),"待支付"===t.status||"待发货"===t.status||"待收货"===t.status?n("v-uni-view",{staticClass:"bg-white position-fixed bottom-0 left-0 right-0 d-flex a-center j-end px-3",staticStyle:{height:"100rpx"}},["待支付"===t.status?[n("common-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openPayMethods.apply(void 0,arguments)}}},[t._v("去支付")]),n("common-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeOrder.apply(void 0,arguments)}}},[t._v("取消订单")])]:"待发货"===t.status?[n("common-button",[t._v("提醒发货")]),n("common-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.applyRefund.apply(void 0,arguments)}}},[t._v("申请退款")])]:"待收货"===t.status?[n("common-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openLogistics.apply(void 0,arguments)}}},[t._v("查看物流")]),n("common-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.received.apply(void 0,arguments)}}},[t._v("确认收货")])]:t._e()],2):t._e()],1)},r=[]},bdd7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{bodyStyle:String,headTitle:String,bodyCover:String,showhead:{type:Boolean,default:!0},headBorderBottom:{type:Boolean,default:!0},bodyPadding:{type:Boolean,default:!1},headTitleWeight:{type:Boolean,default:!0},cardStyle:{type:String,default:""}},computed:{getHeadClass:function(){var t=this.headBorderBottom?"border-bottom":"";return"".concat(t)},getBodyClass:function(){var t=this.bodyPadding?"p-2":"";return"".concat(t)}}};e.default=i},c079:function(t,e,n){"use strict";n("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{priceSize:{type:String,default:"font-md"},unitSize:{type:String,default:"font-sm"},color:{type:String,default:"main-text-color"},price:[Number,String]}};e.default=i},c0a4:function(t,e,n){"use strict";n.r(e);var i=n("000f"),a=n("4785");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var s,o=n("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"38860b50",null,!1,i["a"],s);e["default"]=u.exports},ca16:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"ml-2 rounded border border-light-secondary py-1 px-2 text-secondary",attrs:{"hover-class":"bg-light-secondary"},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.$emit("click")}}},[t._t("default")],2)},r=[]},cd93:function(t,e,n){"use strict";n.r(e);var i=n("bd63"),a=n("5b77");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var s,o=n("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"f21ad5b6",null,!1,i["a"],s);e["default"]=u.exports},df65:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={};e.default=i},e40a:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"card",style:t.cardStyle},[t.showhead?n("v-uni-view",{staticClass:"p-2 main-border-color d-flex a-center j-sb",class:t.getHeadClass},[t.headTitle?t._t("title",[n("v-uni-text",{staticClass:"font-md",class:t.headTitleWeight?"font-weight":""},[t._v(t._s(t.headTitle))])]):t._e(),t._t("right")],2):t._e(),n("v-uni-view",{class:t.getBodyClass,style:t.bodyStyle},[t.bodyCover?n("v-uni-image",{attrs:{src:t.bodyCover,mode:"widthFix"}}):t._e(),t._t("default")],2)],1)},r=[]},ecab:function(t,e,n){"use strict";n.r(e);var i=n("ca16"),a=n("9de7");for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);var s,o=n("f0c5"),u=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"62d4be3e",null,!1,i["a"],s);e["default"]=u.exports}}]);